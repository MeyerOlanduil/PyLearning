## **ğŸ´21ç‚¹ï¼ˆBlackjackï¼‰æ‰‘å…‹æ¸¸æˆ**

>
#### **ç›®æ ‡**
>
>ç©å®¶çš„æ‰‹ç‰Œç‚¹æ•°å°½é‡æ¥è¿‘21ç‚¹ï¼Œä½†ä¸èƒ½è¶…è¿‡21ç‚¹ã€‚
åŒæ—¶è¦æ±‚ç©å®¶æ‰‹ç‰Œç‚¹æ•°é«˜äºåº„å®¶ï¼Œå³ç©å®¶äº‰å–åœ¨ä¸è¶…è¿‡21ç‚¹çš„æƒ…å†µä¸‹ï¼Œ>æ‰‹ç‰Œç‚¹æ•°å°½å¯èƒ½åœ°æ¯”åº„å®¶é«˜ã€‚

>
#### **ç‰Œç‚¹è®¡ç®—**
>
>1. 2è‡³10çš„ç‰ŒæŒ‰å…¶ç‰Œé¢ç‚¹æ•°è®¡ç®—ã€‚
>3. Jã€Qã€Kæ¯å¼ ç‰Œçš„ç‚¹æ•°ä¸º10ç‚¹ã€‚
>3. Aç‰Œå¯è®°ä¸º1ç‚¹æˆ–11ç‚¹ï¼Œæ ¹æ®æœ‰åˆ©åŸåˆ™æ¥å†³å®šã€‚

>
#### **æ¸¸æˆæµç¨‹**

>1. ç©å®¶ä¸‹æ³¨ï¼Œæ¸¸æˆå¼€å§‹ã€‚
>2. åº„å®¶ç»™æ¯ä½ç©å®¶å‘ä¸¤å¼ ç‰Œï¼Œåº„å®¶è‡ªå·±ä¹Ÿå‘ä¸¤å¼ ç‰Œï¼Œå…¶ä¸­ä¸€å¼ ç‰Œé¢å‘ä¸Šï¼Œå¦ä¸€å¼ ç‰Œé¢å‘ä¸‹ã€‚
>3. ç©å®¶æ ¹æ®æ‰‹ç‰Œç‚¹æ•°å†³å®šæ˜¯å¦è¦ç‰Œï¼ˆHitï¼‰æˆ–åœç‰Œï¼ˆStandï¼‰ã€‚
>3. è¦ç‰Œï¼šå†è¦ä¸€å¼ ç‰Œï¼Œå¯åå¤è¦ç‰Œç›´åˆ°å†³å®šåœç‰Œæˆ–çˆ†ç‰Œã€‚
>3. åœç‰Œï¼šä¸å†è¦ç‰Œï¼Œç­‰å¾…åº„å®¶è¡ŒåŠ¨ã€‚
>3. å¦‚æœç©å®¶æ‰‹ç‰Œè¶…è¿‡21ç‚¹ç§°ä¸º"çˆ†ç‰Œ"ï¼ˆBustï¼‰ï¼Œç«‹å³è¾“æ‰æœ¬å±€æ¸¸æˆã€‚
>3. ç©å®¶åœç‰Œåï¼Œåº„å®¶äº®å‡ºæš—ç‰Œå¹¶æ ¹æ®è§„åˆ™è¦ç‰Œæˆ–åœç‰Œï¼š
>3. åº„å®¶æ‰‹ç‰Œç‚¹æ•°å°äº17ç‚¹ï¼Œå¿…é¡»è¦ç‰Œã€‚
>3. åº„å®¶æ‰‹ç‰Œç‚¹æ•°å¤§äºç­‰äº17ç‚¹ï¼Œå¿…é¡»åœç‰Œã€‚
>3. æ¯”è¾ƒç©å®¶å’Œåº„å®¶çš„æ‰‹ç‰Œç‚¹æ•°ï¼Œç‚¹æ•°è¾ƒé«˜çš„ä¸€æ–¹è·èƒœã€‚
>3. ç©å®¶è·èƒœï¼Œèµ¢å¾—ä¸æœ¬é‡‘ç›¸åŒçš„ç­¹ç ã€‚
>3. åº„å®¶è·èƒœï¼Œç©å®¶è¾“æ‰æœ¬é‡‘ç­¹ç ã€‚
>3. ç‚¹æ•°ç›¸åŒï¼ˆå’Œå±€ï¼‰ï¼Œç©å®¶æ”¶å›æœ¬é‡‘ç­¹ç ã€‚

>
#### **ç‰¹æ®Šæƒ…å†µ**

>1. Blackjackï¼šç©å®¶å‰ä¸¤å¼ ç‰Œä¸ºä¸€å¼ Aç‰Œå’Œä¸€å¼ 10ç‚¹ç‰Œï¼Œç§°ä¸º"Blackjack"ï¼Œç›´æ¥è·èƒœå¹¶èµ¢å¾—1.5å€æœ¬é‡‘ã€‚
>3. åˆ†ç‰Œï¼ˆSplitï¼‰ï¼šç©å®¶å‰ä¸¤å¼ ç‰Œç‚¹æ•°ç›¸åŒæ—¶ï¼Œå¯é€‰æ‹©åˆ†ç‰Œï¼Œåˆ†æˆä¸¤æ‰‹ç‰Œåˆ†åˆ«è¿›è¡Œæ¸¸æˆï¼Œéœ€é¢å¤–ä¸‹æ³¨ä¸€å€æœ¬é‡‘ã€‚
>3. åŒå€ä¸‹æ³¨ï¼ˆDouble Downï¼‰ï¼šç©å®¶å‰ä¸¤å¼ ç‰Œæ—¶ï¼Œå¯é€‰æ‹©åŒå€ä¸‹æ³¨ï¼Œå¹¶ä¸”åªèƒ½å†è¦ä¸€å¼ ç‰Œã€‚
>3. ä¿é™©ï¼ˆInsuranceï¼‰ï¼šå½“åº„å®¶äº®å‡ºçš„ç‰Œä¸ºAæ—¶ï¼Œç©å®¶å¯é€‰æ‹©ä¿é™©ï¼Œé¢å¤–ä¸‹æ³¨ä¸€åŠæœ¬é‡‘ã€‚å¦‚æœåº„å®¶ä¸ºBlackjackï¼Œä¿é™©èµ¢å¾—2å€ä¿é™©é‡‘ï¼›å¦åˆ™ï¼Œä¿é™©è¾“æ‰ã€‚

ä»¥ä¸Šå°±æ˜¯21ç‚¹çš„åŸºæœ¬æ¸¸æˆè§„åˆ™ï¼Œéƒ¨åˆ†è§„åˆ™åœ¨ä¸åŒçš„èµŒåœºæˆ–æ¸¸æˆå˜ä½“ä¸­å¯èƒ½ç•¥æœ‰ä¸åŒã€‚

>ä¸‹æ–¹æ˜¯æˆ‘æ‰€å†™çš„å®Œæ•´ä»£ç ï¼Œéƒ¨åˆ†è§„åˆ™å¹¶æ²¡æœ‰å®ç°ã€‚ä¸¤ä¸ªäººç©ã€‚

```Python

import random
from abc import ABCMeta, abstractmethod
import time
import sys

class Card(object):
    '''
    åˆ›å»ºä¸€ä¸ªç‰Œç±»ï¼Œè®°å½•ç‰Œé¢ä»¥åŠå¯¹åº”çš„ç‰Œåˆ†
    '''

    def __init__(self, face):
        '''
        åˆå§‹åŒ–ï¼Œç»™å±æ€§ç‰Œé¢èµ‹å€¼ï¼ˆ1-14ï¼‰
        '''
        self.face = face

    def get_value(self):
        '''
        è¿”å›ç‰Œé¢å¯¹åº”çš„ç‰Œåˆ†
        '''
        values = ['', [1, 11], 2, 3, 4, 5, 6, 7, 8, 9, 10, 10, 10, 10]
        return values[self.face]
    
    def __repr__(self):
        '''
        è¿”å›ä¸€ä¸ªç‰Œé¢ï¼ˆç‰Œåˆ†ï¼‰å­—ç¬¦ä¸²
        '''
        faces = ['', 'A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K']
        values = ['', [1, 11], 2, 3, 4, 5, 6, 7, 8, 9, 10, 10, 10, 10]
        return f'{faces[self.face]}({values[self.face]})'

# test_Card
# crd = Card(12)
# print(crd)
# print(crd.get_value())

class Deck(object):
    '''
    åˆ›å»ºä¸€ä¸ªç‰Œç»„ç±»ï¼Œè®°å½•ç‰Œç»„ï¼Œç”¨äºå‘ç‰Œï¼Œæ´—ç‰Œï¼Œåˆ¤æ–­ç‰Œæ•°
    '''

    def __init__(self, decks = 1):
        '''
        åˆå§‹åŒ–ï¼Œå‚æ•°åŒ…æ‹¬ç‰Œç»„æ•°ç›®ï¼ˆå‡ å‰¯ç‰Œï¼‰
        '''
        self.cards = [Card(face) for deck in range(1, decks+1) for i in range(4) for face in range(1,14)]
        ## æ ¹æ®ç‰Œç»„æ•°ç›®ç”Ÿæˆ å¡ç‰Œå 
        self.point = 0
        ## æŒ‡é’ˆï¼Œç”¨äºæŒ‡å‘å½“å‰ç‰Œçš„ä½ç½®

    def shuffle(self):
        self.point = 0
        random.shuffle(self.cards)
        ## éšæœºæ´—ç‰Œ

    def licensing(self):
        '''
        å‘ç‰Œï¼Œæ¯æ¬¡å‘ä¸€å¼ ,æŒ‡é’ˆå‘åé€€ä¸€ä¸ª
        '''
        card = self.cards[self.point]
        self.point += 1
        return card

    def is_enough(self):
        '''
        è¿˜å¤Ÿå‘å—ï¼Ÿé»˜è®¤è§„å®šè¿˜å‰©5å¼ ç‰Œå°±ä¸å†å‘äº†
        '''
        return len(self.cards) - self.point <= 5

# test_Deck 
# dk = Deck(2)
# print(dk.cards)
# dk.shuffle()
# print(len(dk.cards))
# print(dk.cards)
# print(dk.licensing())
# print(dk.is_enough())

class Player(metaclass = ABCMeta):

    def __init__(self, name, chip = 100):
        self.name = name
        self.score = 0  ## ç‰Œåˆ†æ€»å’Œï¼Œæ¯æ¬¡æ‘¸ç‰Œåéƒ½ä¼šå˜åŒ–ï¼Œç”¨äºè¯„åˆ¤
        self.chip = chip  ## ç­¹ç ï¼Œé»˜è®¤100
        self.cards = []

    @abstractmethod  
    def Draw(self):
        '''
        æ‘¸ç‰Œï¼Œä¸€æ¬¡æ‘¸ä¸€å¼ ç‰Œï¼Œå¹¶è·å–å…¶ç‰Œåˆ†ï¼Œè®°å½•åœ¨ç‰Œåˆ†åº“é‡Œ
        '''
        pass

    def Bet(self,num):
        '''
        ä¸‹æ³¨
        '''
        self.chip -= num
        return self.chip
    
    def Scoring(self):
        '''
        è®¡åˆ†ï¼Œæ¯æ‘¸ä¸€æ¬¡ç‰Œåç®—ä¸€æ¬¡åˆ†
        '''
        if self.cards[-1].face != 1:
            self.score += self.cards[-1].get_value()
        else:
            if self.score + 11 > 21:
                self.score += self.cards[-1].get_value()[0]  ## æ€»åˆ†+11åå¤§äº21ï¼Œåˆ™åŠ 1
            else:
                self.score += self.cards[-1].get_value()[1]  ## æ€»åˆ†+11åå°äº21ï¼Œåˆ™åŠ 11
        return self.score  ## è¿”å›æ­¤æ¬¡æ‘¸ç‰Œååˆ†æ•°

class Makers(Player):  ## åº„å®¶

    def __init__(self, name = 'Robot', chip = 100):
        self.name = name
        self.score = 0
        self.chip = chip
        self.cards = []

    def Draw(self, card):
        self.cards.append(card) 

class Downs(Player):  ## ä¸‹å®¶

    def __init__(self, name, chip = 100):
        self.name = name
        self.score = 0
        self.chip = chip
        self.cards = []

    def Draw(self, card):
        self.cards.append(card) 

# test_Player
# dk = Deck()
# dk.shuffle()
# print(dk.cards)
# jim = Downs('jim')
# jim.Bet(5)
# jim.Draw(dk.licensing())
# print(jim.Scoring())
# jim.Draw(dk.licensing())
# print(jim.Scoring())
# jim.Draw(dk.licensing())
# print(jim.Scoring())
# jim.Draw(dk.licensing())
# print(jim.Scoring())
# print(jim.cards)
# print(jim.chip)
# print(jim.score)

class Game(object):
    '''
    ç‰Œå±€
    '''
    
    def __init__(self):
        
        print('æ¬¢è¿æ¥åˆ°Blackjorkeræ¸¸æˆï¼')
        print()

        ## åˆ›å»ºæ¸¸æˆç©å®¶
        self.init_chip = int(input('è¯·è¾“å…¥åˆå§‹ç©å®¶ç­¹ç æ•°ç›®ï¼š'))
        self.player1 = Makers(chip = self.init_chip) ## åº„å®¶
        self.player2 = Downs(name = input('è¯·è¾“å…¥ç”¨æˆ·ååˆ›å»ºæ‚¨çš„æ¸¸æˆè§’è‰²ï¼š'), chip = self.init_chip)  ## ç©å®¶ï¼ˆä¸‹å®¶ï¼‰
        self.players = [self.player1, self.player2]

        ## å…¶å®ƒç‰Œå±€å‚æ•°
        self.bet_chip = 0  ## ç©å®¶ä¸‹æ³¨
        self.count = 1  ##æ¸¸æˆè½®æ•°
        self.times = 1  ##åˆå§‹å€ç‡
        self.div = 1  ##å›åˆ

        ## è¾“å‡ºç‰Œå±€ä¿¡æ¯
        print()
        print('æ‰€æœ‰ç©å®¶éƒ½å·²è¿›å…¥ç‰Œå±€ï¼Œè¯·æŸ¥çœ‹ä½ ä»¬çš„ä¿¡æ¯ï¼š')
        print(f'åº„å®¶{self.player1.name}ï¼Œåˆå§‹ç­¹ç {self.player1.chip}')
        print(f'åº„å®¶{self.player2.name}ï¼Œåˆå§‹ç­¹ç {self.player2.chip}')

        ## åˆ›å»ºç‰Œç»„èµ„æº
        print()
        self.decks = Deck(int(input('è¯·è¾“å…¥ç‰Œç»„æ•°ç›®ï¼š')))  ## åˆ›å»ºç‰Œç»„
        self.decks.shuffle()  ##æ´—ç‰Œ

        ## å‡†å¤‡å¼€å§‹æ¸¸æˆ
        print()
        flag = int(input('ç‰Œå±€å‡†å¤‡å®Œæ¯•ï¼è¯·è¾“å…¥1å¼€å§‹æ¸¸æˆ/0é€€å‡ºæ¸¸æˆï¼š'))
        if flag == 1:
            self.GameStart()
        else:
            sys.exit()

    def Judge(self):
        '''
        0 ç»§ç»­
        1 ç©å®¶1èƒœåˆ©
        2 ç©å®¶2èƒœåˆ©
        3 å¹³å±€
        '''
        if self.div == 1:
            if self.player1.score == 21 and self.player1.score != self.player2.score: ## åº„å®¶æ˜¯BJ
                self.times = 1.5
                return 1
            elif self.player2.score == 21 and self.player1.score != self.player2.score:  ## ç©å®¶æ˜¯BJ
                self.times = 1.5
                return 2
            else:
                return 0
        elif self.div == 2:
            if self.player2.score > 21:
                return 1
            else:
                return 0
        else:
            if self.player1.score > 21:
                return 2
            elif self.player1.score > self.player2.score:
                return 1
            elif self.player2.score > self.player1.score:
                return 2
            elif self.player1.score == self.player2.score:
                return 3

    def  Count(self, ord):
        if ord == 1:
            self.player1.chip = self.player1.chip + self.times * self.bet_chip
            self.player2.chip -= (self.times - 1) * self.bet_chip
        elif ord == 2:
            self.player2.chip = self.player2.chip + self.bet_chip + self.times * self.bet_chip
            self.player1.chip -= self.times * self.bet_chip
        elif ord == 3:
            self.player2.chip = self.player2.chip + self.bet_chip
    
    def GameStart(self):

        ## ç‰Œå±€æ­£å¼å¼€å§‹
        while self.player1.chip > 0 and self.player2.chip > 0 and not(self.decks.is_enough()):

            print()
            self.times = 1 ## å€ç‡ç½®1
            self.player1.cards = []
            self.player2.cards = []
            self.player1.score = 0
            self.player2.score = 0
            self.div = 1  ## è®°å½•å½“å‰è½®æ¬¡ä¸­çš„å›åˆ
            
            print(f'ç¬¬{self.count}è½®æ¸¸æˆå¼€å§‹ï¼Œè¯·ç©å®¶{self.player2.name}ä¸‹æ³¨ï¼')
            self.count += 1 ## è½®æ•°+1
            
            self.bet_chip = int(input('è¯·è¾“å…¥ä¸‹æ³¨ç­¹ç æ•°é¢ï¼š'))  ## ä¸‹æ³¨ç­¹ç æ”¾åœ¨ç‰Œå±€ä¸Š
            self.player2.Bet(self.bet_chip)
            print(self.player2.chip) ## test
            
            print()
            print('ä¸‹æ³¨ç¯èŠ‚ç»“æŸï¼Œæ¥ä¸‹æ¥æ¯äººå°†ä¼šå‘åˆ°ä¸¤å¼ åº•ç‰Œï¼')

            ## å‘åº•ç‰Œ
            for i in range(2):
                for player in self.players:
                    player.Draw(self.decks.licensing())  ## æ‘¸ç‰Œ
                    player.Scoring()  ## è®¡ç®—ç‰Œåˆ†

            ## åº•ç‰Œå±•ç¤º
            time.sleep(1)
            print('åº•ç‰Œå·²å‘å®Œï¼Œè¯·æŸ¥çœ‹è‡ªå·±å½“å‰æ‰‹ç‰Œï¼š')
            print(f'åº„å®¶{self.player1.name}æ˜ç‰Œï¼š[{self.player1.cards[random.randint(0, 1)]}]')
            print(f'ç©å®¶{self.player2.name}æ‰‹ç‰Œï¼š{self.player2.cards}')

            ##åˆ¤æ–­é¦–è½®è¾“èµ¢
            print()
            print('æ­£åœ¨åˆ¤æ–­æœ¬è½®èƒœè´Ÿæƒ…å†µ...')
            time.sleep(1)
            win_flag = self.Judge()
            
            if win_flag == 1:
                print(f'åº„å®¶{self.player1.name}æœ¬è½®èƒœå‡ºï¼')
                self.Count(self.Judge())
            elif win_flag == 2:
                print(f'ç©å®¶{self.player2.name}æœ¬è½®èƒœå‡ºï¼')
                self.Count(self.Judge())
            else:
                while True:
                    
                    flag = int(input('æ‚¨çš„å›åˆï¼Œæ˜¯å¦è¦ç‰Œï¼Ÿ1ï¼ˆè¦ç‰Œï¼‰/0ï¼ˆåœç‰Œï¼‰ï¼š'))
                    if flag == 1:
                        self.player2.Draw(self.decks.licensing())
                        self.player2.Scoring()
                        print(f'ç©å®¶{self.player2.name}æ‰‹ç‰Œï¼š{self.player2.cards}')
                        
                        ##åˆ¤æ–­è¾“èµ¢
                        print()
                        print('æ­£åœ¨åˆ¤æ–­æœ¬è½®èƒœè´Ÿæƒ…å†µ...')
                        time.sleep(1)
                        self.div = 2
                        win_flag = self.Judge()

                        if win_flag == 1:
                            print(f'åº„å®¶{self.player1.name}æœ¬è½®èƒœå‡ºï¼')
                            self.Count(self.Judge())
                            break
                    
                    else:
                        print()
                        print('åº„å®¶çš„å›åˆ')
                        while self.player1.score < 17:
                            print('åº„å®¶è¦ç‰Œ')
                            self.player1.Draw(self.decks.licensing())
                            self.player1.Scoring()

                        ##åˆ¤æ–­è¾“èµ¢
                        print()
                        print('æ­£åœ¨åˆ¤æ–­æœ¬è½®èƒœè´Ÿæƒ…å†µ...')
                        time.sleep(1)
                        self.div = 3
                        win_flag = self.Judge()
                        
                        if win_flag == 1:
                            print(f'åº„å®¶{self.player1.name}æœ¬è½®èƒœå‡ºï¼')
                            self.Count(self.Judge())
                            break
                        elif win_flag == 2:
                            print(f'ç©å®¶{self.player2.name}æœ¬è½®èƒœå‡ºï¼')
                            self.Count(self.Judge())
                            break
                        elif win_flag == 3:
                            print(f'åº„å®¶{self.player1.name}å’Œç©å®¶{self.player1.name}å¹³å±€ï¼')
                            self.Count(self.Judge())
                            break
                        
            
            print()
            print('æœ¬è½®ç»“æŸï¼Œå³å°†è¿›å…¥ä¸‹ä¸€è½®ï¼ŒåŒæ–¹å‰©ä½™ç­¹ç æ•°ç›®ï¼š')
            print(f'åº„å®¶{self.player1.name}ï¼Œå‰©ä½™ç­¹ç {self.player1.chip}')
            print(f'ç©å®¶{self.player2.name}ï¼Œå‰©ä½™ç­¹ç {self.player2.chip}')
            
                        
        ## ç‰Œå±€ç»“æŸï¼Œæ¸…ç‚¹ç­¹ç 
        print()
        print('Blackjorkeræ¸¸æˆç»“æŸï¼Œæ¬¢è¿å„ä½å‚ä¸ï¼Œä»¥ä¸‹æ˜¯æœ¬åœºç‰Œå±€ç­¹ç æƒ…å†µï¼š')
        print(f'åº„å®¶{self.player1.name}ï¼Œç»“ç®—ç­¹ç {self.player1.chip}')
        print(f'ç©å®¶{self.player2.name}ï¼Œç»“ç®—ç­¹ç {self.player2.chip}')

        print('- THE END -')
    

NewGame = Game()

```
